{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://chirpstack-provisioning.schemas/provisioning.json",
  "title": "ChirpStack Provisioning Data",
  "description": "Schema for provisioning ChirpStack LoRaWAN devices and gateways",
  "type": "object",
  "oneOf": [
    {
      "title": "Device",
      "description": "ChirpStack LoRaWAN device configuration",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "device",
          "description": "Entity type identifier"
        },
        "dev_eui": {
          "type": "string",
          "pattern": "^[0-9A-Fa-f]{16}$",
          "description": "Device EUI in hexadecimal format (16 characters)"
        },
        "device_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Human-readable name for the device"
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Optional description of the device"
        },
        "app_key": {
          "type": "string",
          "pattern": "^[0-9A-Fa-f]{32}$",
          "description": "Application key in hexadecimal format (32 characters)"
        },
        "app_eui": {
          "type": "string",
          "pattern": "^[0-9A-Fa-f]{16}$",
          "description": "Application EUI in hexadecimal format (16 characters, optional for OTAA)"
        },
        "tenant_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Name of the tenant (will be flagged if doesn't exist)"
        },
        "application_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Name of the application (will be flagged if doesn't exist)"
        },
        "device_profile_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Name of the device profile (will be flagged if doesn't exist)"
        },
        "variables": {
          "type": "object",
          "description": "Additional device variables",
          "additionalProperties": {
            "type": "string"
          }
        },
        "tags": {
          "type": "object",
          "description": "Device tags for organization and filtering",
          "additionalProperties": {
            "type": "string"
          }
        },
        "is_disabled": {
          "type": "boolean",
          "description": "Whether the device is disabled",
          "default": false
        },
        "skip_fcnt_check": {
          "type": "boolean",
          "description": "Skip frame counter validation",
          "default": false
        }
      },
      "required": ["type", "dev_eui", "device_name", "app_key", "tenant_name", "application_name", "device_profile_name"],
      "additionalProperties": false
    },
    {
      "title": "Gateway",
      "description": "ChirpStack LoRaWAN gateway configuration",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "gateway",
          "description": "Entity type identifier"
        },
        "gateway_id": {
          "type": "string",
          "pattern": "^[0-9A-Fa-f]{16}$",
          "description": "Gateway ID in hexadecimal format (16 characters)"
        },
        "gateway_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Human-readable name for the gateway"
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Optional description of the gateway"
        },
        "tenant_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Name of the tenant (will be flagged if doesn't exist)"
        },
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude coordinate of the gateway location"
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude coordinate of the gateway location"
        },
        "altitude": {
          "type": "number",
          "description": "Altitude of the gateway in meters"
        },
        "stats_interval": {
          "type": "integer",
          "minimum": 1,
          "maximum": 86400,
          "description": "Statistics reporting interval in seconds",
          "default": 30
        },
        "tags": {
          "type": "object",
          "description": "Gateway tags for organization and filtering",
          "additionalProperties": {
            "type": "string"
          }
        },
        "metadata": {
          "type": "object",
          "description": "Additional gateway metadata",
          "additionalProperties": true
        }
      },
      "required": ["type", "gateway_id", "gateway_name", "tenant_name"],
      "additionalProperties": false
    }
  ]
}